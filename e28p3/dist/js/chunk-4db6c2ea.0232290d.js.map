{"version":3,"sources":["webpack:///./src/assets/images/recipes/2.jpg","webpack:///./src/components/pages/RecipePage.vue?e22f","webpack:///./src/features/useFavorite.js","webpack:///src/components/pages/RecipePage.vue","webpack:///./src/components/pages/RecipePage.vue?9a54","webpack:///./src/components/pages/RecipePage.vue","webpack:///./src/assets/images/recipes/image-not-available.jpg","webpack:///./src/assets/images/recipes/1.jpg","webpack:///./src/assets/images/recipes sync ^\\.\\/.*\\.jpg$","webpack:///./src/components/ShowRecipe.vue?bb02","webpack:///src/components/ShowRecipe.vue","webpack:///./src/components/ShowRecipe.vue?fe23","webpack:///./src/components/ShowRecipe.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","recipe","on","addToShopping","_v","staticClass","_e","$event","removeFromFavorites","addToFavorites","_s","id","staticRenderFns","useFavorite","recipeId","isFavorite","ref","favoriteId","axios","get","then","response","data","results","length","value","post","recipe_id","success","favorite","delete","setup","name","props","components","ShowRecipe","addAlert","computed","recipes","filter","recipeNotFound","ingredients","recipesStore","$store","state","user","methods","addFavorite","errors","commit","setTimeout","component","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","imageSource","favortie","_l","ingredient","key","directions"],"mappings":"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","file":"js/chunk-4db6c2ea.0232290d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/2.1de3a108.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"recipe-page\"}},[(_vm.recipe)?_c('div',[_c('show-recipe',{attrs:{\"recipe\":_vm.recipe,\"includeDetails\":true}}),_c('button',{attrs:{\"data-test\":\"add-to-shopping-button\"},on:{\"click\":_vm.addToShopping}},[_vm._v(\"Add To Shopping List\")]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.addAlert)?_c('div',{staticClass:\"alert\",attrs:{\"data-test\":\"add-to-shopping-conformation\"}},[_vm._v(\" Your list has been updated! \")]):_vm._e()]),(_vm.user)?_c('div',[(_vm.isFavorite)?_c('button',{on:{\"click\":function($event){return _vm.removeFromFavorites()}}},[_vm._v(\"Remove from favorites\")]):_c('button',{on:{\"click\":function($event){return _vm.addToFavorites()}}},[_vm._v(\"❤ Add to favorites\")])]):_vm._e()],1):_vm._e(),(_vm.recipeNotFound)?_c('div',[_c('p',[_vm._v(\"Recipe \"+_vm._s(_vm.id)+\" not found.\")]),_c('router-link',{attrs:{\"to\":'/'}},[_vm._v(\"Go to all recipes \")])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { ref } from '@vue/composition-api'\nimport { axios } from '@/common/app.js';\n\nexport default function useFavorite(recipeId) {\n\n    // Reactive references\n    let isFavorite = ref(false);\n    let favoriteId = ref(null);\n\n    // Initially, we need to figure out if this recipe is a favorite\n    // We do this by pinging the `favorite` \"query\" route where the `recipe_id` field `recipeId`\n    // (Note that because the `favorite` resource is auth-restricted, it will automatically only\n    // return favorites belonging to this user, so we don't have to include that as part of the query)\n    axios.get('/favorite/query?recipe_id=' + recipeId).then((response) => {\n        if (response.data.results.length > 0) {\n            // There should only ever be one unique match between a given user id and a given recipe id\n            // so we narrow the results down to [0]\n            favoriteId.value = response.data.results[0].id;\n            isFavorite.value = true;\n        }\n    });\n\n    const addToFavorites = () => {\n        axios.post('/favorite', {\n            recipe_id: recipeId,\n            // Note: don't have to specify user_id because it's implied with auth-restricted resources\n        }).then((response) => {\n            if (response.data.success) {\n                isFavorite.value = true;\n                favoriteId.value = response.data.favorite.id;\n            }\n        });\n    }\n\n    const removeFromFavorites = () => {\n        axios.delete('/favorite/' + favoriteId.value).then((response) => {\n            if (response.data.success) {\n                isFavorite.value = false;\n                favoriteId.value = null;\n            }\n        });\n    }\n\n    return { isFavorite, addToFavorites, removeFromFavorites }\n}","<template>\n  <div id=\"recipe-page\">\n    <div v-if=\"recipe\">\n      <show-recipe :recipe=\"recipe\" :includeDetails=\"true\"></show-recipe>\n      <button v-on:click=\"addToShopping\" data-test=\"add-to-shopping-button\">Add To Shopping List</button>\n      <transition name=\"fade\">\n        <div class=\"alert\" data-test=\"add-to-shopping-conformation\" v-if=\"addAlert\">\n          Your list has been updated!\n        </div>\n      </transition>\n     <div v-if=\"user\">\n                <button v-if=\"isFavorite\" @click=\"removeFromFavorites()\">Remove from favorites</button>\n                <button v-else @click=\"addToFavorites()\">❤ Add to favorites</button>\n      </div>\n    </div>\n    <div v-if=\"recipeNotFound\">\n      <p>Recipe {{ id }} not found.</p>\n      <router-link v-bind:to=\"'/'\">Go to all recipes </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ShowRecipe from \"@/components/ShowRecipe.vue\";\nimport { axios } from \"@/common/app.js\";\nimport { cart } from \"@/common/app.js\";\nimport useFavorite from '@/features/useFavorite.js';\n\nexport default {\n  setup(props) {\n        const { isFavorite, addToFavorites, removeFromFavorites } = useFavorite(\n            props.id\n        );\n\n        return { isFavorite, addToFavorites, removeFromFavorites };\n    },\n  name: \"\",\n  props: [\"id\", \"recipes\", \"favorite\"],\n  components: {\n    \"show-recipe\": ShowRecipe,\n  },\n  data: function() {\n    return {\n      addAlert: false,\n\n    };\n  },\n  computed: {\n    recipe() {\n      return this.recipes.filter((recipe) => {\n        return recipe.id == this.id;\n      }, this.id)[0];\n    },\n    recipeNotFound() {\n      return this.recipe == null;\n    },\n    ingredients() {\n      let ingredients = this.recipes.map((recipe) =>\n        recipe.ingredients.split(\",\")\n      );\n      let mergedIngredients = [].concat.apply([], ingredients);\n\n      // Return unique, sorted categories\n      return [...new Set(mergedIngredients)].sort();\n    },\n    recipesStore() {\n      return this.$store.state.recipes;\n    },\n    user() {\n            return this.$store.state.user;\n        },\n  },\n  methods: {\n    addFavorite() {\n      axios.put(\"/recipe/\" + this.recipe.id, this.recipe).then((response) => {\n        if (response.data.errors != null) {\n          this.errors = response.data.errors;\n        } else {\n          this.$emit(\"update-recipes\");\n        }\n      });\n    },\n    addToShopping() {\n      cart.add(this.recipe.id, 1);\n      this.$store.commit(\"setCartCount\", cart.count());\n      this.addAlert = true;\n      setTimeout(() => (this.addAlert = false), 2000);\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecipePage.vue?vue&type=template&id=61a23818&scoped=true&\"\nimport script from \"./RecipePage.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipePage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61a23818\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/image-not-available.89cb6e1e.jpg\";","module.exports = __webpack_public_path__ + \"img/1.35e9f2d4.jpg\";","var map = {\n\t\"./1.jpg\": \"9ef4\",\n\t\"./2.jpg\": \"3e13\",\n\t\"./image-not-available.jpg\": \"82a1\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"ca62\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recipe\"},[_c('h1',{staticClass:\"recipe-name\",attrs:{\"data-test\":\"recipe-name\"}},[_vm._v(_vm._s(_vm.recipe.name))]),_c('img',{staticClass:\"recipe-thumb\",attrs:{\"data-test\":'recipe-image-' + _vm.recipe.id,\"src\":_vm.imageSource}}),(_vm.includeDetails)?_c('div',[_c('p',{staticClass:\"recipe-favorite\"},[_vm._v(_vm._s(_vm.recipe.favortie))]),_c('div',{staticClass:\"ingredients\"},[_c('h2',[_vm._v(\"Ingredients\")]),_c('ul',_vm._l((_vm.ingredients),function(ingredient){return _c('li',{key:ingredient},[_vm._v(\" \"+_vm._s(ingredient)+\" \")])}),0)]),_c('div',{staticClass:\"directions\"},[_c('h2',[_vm._v(\"Directions\")]),_c('ol',_vm._l((_vm.directions),function(directions){return _c('li',{key:directions},[_vm._v(\" \"+_vm._s(directions)+\" \")])}),0)])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"recipe\">\n    <h1 class=\"recipe-name\" data-test=\"recipe-name\" >{{ recipe.name }}</h1>\n    <img class=\"recipe-thumb\" :data-test=\"'recipe-image-' + recipe.id\" :src=\"imageSource\" />\n    <div v-if=\"includeDetails\">\n      <p class=\"recipe-favorite\">{{ recipe.favortie }}</p>\n      <div class=\"ingredients\">\n        <h2>Ingredients</h2>\n        <ul>\n          <li v-for=\"ingredient in ingredients\" :key=\"ingredient\">\n            {{ ingredient }}\n          </li>\n        </ul>\n      </div>\n      <div class=\"directions\">\n        <h2>Directions</h2>\n        <ol>\n          <li v-for=\"directions in directions\" :key=\"directions\">\n            {{ directions }}\n          </li>\n        </ol>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"show-recipe\",\n  props: [\"recipe\", \"includeDetails\", \"favorite\"],\n  data: function() {\n    return {};\n  },\n  computed: {\n    imageSource() {\n      try {\n        return require(\"@/assets/images/recipes/\" + this.recipe.id + \".jpg\");\n      } catch (e) {\n        return require(\"@/assets/images/recipes/image-not-available.jpg\");\n      }\n    },\n    ingredients() {\n      let ingredients = this.recipe.ingredients.split(\",\");\n      return ingredients;\n    },\n    directions() {\n      let directions = this.recipe.directions.split(\",\");\n      return directions;\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowRecipe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowRecipe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShowRecipe.vue?vue&type=template&id=282642ec&scoped=true&\"\nimport script from \"./ShowRecipe.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowRecipe.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"282642ec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}